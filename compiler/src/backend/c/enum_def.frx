export void transpile_enum_def(Transpiler* transpiler, ASTEnumDef* enum_def)
{
    assert(transpiler != nullptr);

    assert(enum_def != nullptr);

    if(transpiler->mode != TRANSPILER_MODE_ENUMS)
    {
        return;
    }

    EnumSymbol* symbol = &enum_def->symbol;

    fprintf(transpiler->file, "enum {\n");

    char[strlen(symbol->name) + 1] namespaced_name;
    strcpy(namespaced_name, symbol->name);

    usize i;
    for(i = 0; i < strlen(namespaced_name); i = i + 1)
    {
        //TODO: Remove this var. Bootstrap compiler cannot handle lvalues...
        char temp = namespaced_name[i] = toupper(namespaced_name[i]);
    }

    for(i = 0; i < list_size(&symbol->constants); i = i + 1)
    {
        ASTEnumConstantDef* constant = list_get(&symbol->constants, i);

        fprintf(transpiler->file, "%s_%s = ", namespaced_name, constant->name);
        transpile_ast(transpiler, constant->value);
        fprintf(transpiler->file, ",\n");
    }

    fprintf(transpiler->file, "};\n");

    fprintf(transpiler->file, "typedef %s ", token_type_to_str(symbol->type));
    transpile_enum_symbol_name(transpiler, symbol);
    fprintf(transpiler->file, ";\n");
}

export void transpile_enum_symbol_name(Transpiler* transpiler,
    EnumSymbol* symbol)
{
    assert(transpiler != nullptr);

    assert(symbol != nullptr);

    transpile_namespace_resolution(transpiler, symbol->ns);
    fprintf(transpiler->file, "%s", symbol->name);
}
