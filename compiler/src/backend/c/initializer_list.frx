import "c.frx";
import "expr.frx";
import "../../core/list.frx";
import "../../frontend/ast/initializer_list.frx";

extern struct FILE;

extern
{
    i32 fprintf(mut FILE* stream, char* format, ...);
}

export void transpile_initializer_list(Transpiler* transpiler,
    AST::InitializerList* list)
{
    frx::assert(transpiler != nullptr);

    frx::assert(list != nullptr);

    fprintf(transpiler->file, "{\n");

    mut usize i;
    for(i = 0; i < list_size(&list->values); i = i + 1)
    {
        AST::Expr* value = list_get(&list->values, i);
        transpile_expr(transpiler, value);

        fprintf(transpiler->file, ",\n");
    }

    fprintf(transpiler->file, "}");
}
