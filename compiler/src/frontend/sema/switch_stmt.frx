import "expr.frx";
import "scope.frx";
import "../core/parser.frx";
import "../ast/switch_stmt.frx";
import "../../core/list.frx";

void switch_case_sema(Parser* parser, SwitchCase* switch_case)
{
    frx::assert(parser != nullptr);

    frx::assert(switch_case != nullptr);

    expr_sema(parser, switch_case->value);
    scope_sema(parser, switch_case->scope);
}

export void switch_stmt_sema(Parser* parser, SwitchStmt* switch_stmt)
{
    frx::assert(parser != nullptr);

    frx::assert(switch_stmt != nullptr);

    expr_sema(parser, switch_stmt->value);

    mut usize i;
    for(i = 0; i < list_size(&switch_stmt->cases); i = i + 1)
    {
        SwitchCase* switch_case = list_get(&switch_stmt->cases, i);
        switch_case_sema(parser, switch_case);
    }

    if(switch_stmt->default_scope != nullptr)
    {
        scope_sema(parser, switch_stmt->default_scope);
    }
}
