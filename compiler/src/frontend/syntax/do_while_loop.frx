export import "../ast/do_while_loop.frx";
import "expr.frx";
import "scope.frx";
import "../core/parser.frx";

namespace AST::DoWhileLoop
{
    export DoWhileLoop* parse(Parser* parser)
    {
        frx::assert(parser != nullptr);

        Parser::eat(parser, TokenType::KW_DO);

        Scope* scope = AST::Scope::parse(parser);

        Parser::eat(parser, TokenType::KW_WHILE);
        Parser::eat(parser, TokenType::LPAREN);
        Expr* condition = AST::Expr::parse(parser);
        Parser::eat(parser, TokenType::RPAREN);
        Parser::eat(parser, TokenType::SEMICOLON);

        return new(&parser->arena, scope, condition);
    }
}
