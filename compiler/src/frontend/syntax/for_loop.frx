export import "../ast/for_loop.frx";
import "expr.frx";
import "scope.frx";
import "../core/parser.frx";

namespace AST::ForLoop
{
    export ForLoop* parse(Parser* parser)
    {
        frx::assert(parser != nullptr);

        Parser::eat(parser, TokenType::KW_FOR);

        Parser::eat(parser, TokenType::LPAREN);

        Expr* initialization = AST::Expr::parse(parser);
        Parser::eat(parser, TokenType::SEMICOLON);
        Expr* condition = AST::Expr::parse(parser);
        Parser::eat(parser, TokenType::SEMICOLON);
        Expr* iteration = AST::Expr::parse(parser);

        Parser::eat(parser, TokenType::RPAREN);

        Scope* scope = AST::Scope::parse(parser);

        return new(&parser->arena, initialization, condition, iteration, scope);
    }
}
