export import "../ast/for_loop.frx";
import "expr.frx";
import "scope.frx";
import "../core/parser.frx";

export ForLoop* for_loop_parse(Parser* parser)
{
    frx::assert(parser != nullptr);

    parser_eat(parser, TokenType::KW_FOR);

    parser_eat(parser, TokenType::LPAREN);

    Expr* initialization = expr_parse(parser);
    parser_eat(parser, TokenType::SEMICOLON);
    Expr* condition = expr_parse(parser);
    parser_eat(parser, TokenType::SEMICOLON);
    Expr* iteration = expr_parse(parser);

    parser_eat(parser, TokenType::RPAREN);

    Scope* scope = scope_parse(parser);

    return for_loop_new(&parser->arena, initialization, condition, iteration, scope);
}
