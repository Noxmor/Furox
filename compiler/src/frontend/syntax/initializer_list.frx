export import "../ast/initializer_list.frx";
import "expr.frx";
import "../core/parser.frx";
import "../../core/list.frx";

namespace AST::InitializerList
{
    export InitializerList* parse(Parser* parser)
    {
        frx::assert(parser != nullptr);

        Parser::eat(parser, TokenType::LBRACE);

        InitializerList* list = new(&parser->arena);

        while(Parser::loop_until(parser, TokenType::RBRACE))
        {
            if(list_size(&list->values) > 0)
            {
                Parser::eat(parser, TokenType::COMMA);
            }

            Expr* value = AST::Expr::parse(parser);
            list_push(&list->values, value);
        }

        Parser::eat(parser, TokenType::RBRACE);

        return list;
    }
}
