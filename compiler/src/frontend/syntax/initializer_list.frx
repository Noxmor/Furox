export import "../ast/initializer_list.frx";
import "expr.frx";
import "../core/parser.frx";
import "../../core/list.frx";

export InitializerList* initializer_list_parse(Parser* parser)
{
    frx::assert(parser != nullptr);

    parser_eat(parser, TokenType::LBRACE);

    InitializerList* list = initializer_list_new(&parser->arena);

    while(parser_loop_until(parser, TokenType::RBRACE))
    {
        if(list_size(&list->values) > 0)
        {
            parser_eat(parser, TokenType::COMMA);
        }

        Expr* value = expr_parse(parser);
        list_push(&list->values, value);
    }

    parser_eat(parser, TokenType::RBRACE);

    return list;
}
