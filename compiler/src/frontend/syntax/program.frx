import "../core/parser.frx";
import "../../core/list.frx";

export struct ASTProgram
{
    List translation_units;
}

export ASTProgram* make_program()
{
    ASTProgram* program = malloc(sizeof(ASTProgram));

    list_init(&program->translation_units);

    return program;
}

export void print_program(ASTProgram* program, FILE* file, usize depth)
{
    assert(program != nullptr);

    assert(file != nullptr);

    print_ast_depth(file, depth);

    fprintf(file, "%s\n", ast_type_to_str(AST_TYPE_PROGRAM));

    usize i;
    for(i = 0; i < list_size(&program->translation_units); i = i + 1)
    {
        ASTCompound* translation_unit = list_get(&program->translation_units,
            i);

        print_compound(translation_unit, file, depth + 1);
    }
}
