export import "../ast/return_stmt.frx";
import "expr.frx";
import "../core/parser.frx";

namespace AST::ReturnStmt
{
    export ReturnStmt* parse(Parser* parser)
    {
        frx::assert(parser != nullptr);

        Parser::eat(parser, TokenType::KW_RETURN);

        if(parser->token->type != TokenType::SEMICOLON)
        {
            Expr* value = AST::Expr::parse(parser);

            Parser::eat(parser, TokenType::SEMICOLON);

            return with_value(&parser->arena, value);
        }

        Parser::eat(parser, TokenType::SEMICOLON);

        return new(&parser->arena);
    }
}
