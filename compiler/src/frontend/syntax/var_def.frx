export import "../ast/var_def.frx";
import "expr.frx";
import "type_specifier.frx";
import "../core/parser.frx";
import "../core/scope.frx";
import "../symbols/var.frx";

export VarDef* var_def_parse(Parser* parser, TypeSpecifier* type, char* name, b8 mutable)
{
    frx::assert(parser != nullptr);

    mut VarDef* var_def = var_def_new(&parser->arena, type, parser->current_scope,
            name, mutable);

    var_table_insert(&parser->var_table, &var_def->symbol);

    parser_eat(parser, TokenType::EQ);

    var_def->value = expr_parse(parser);

    parser_eat(parser, TokenType::SEMICOLON);

    return var_def;
}
